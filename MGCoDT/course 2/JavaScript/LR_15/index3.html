<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>LR 15</title>
    </head>
    <body>
        <!-- Задание 4: Дан текстареа. В него можно ввести данные, затем поредактировать их, затем еще поредактировать. Пусть текстареа хранит историю своих изменений (даже после перезагрузки страницы). Сверху над текстареа должны появится стрелочки, с помощью которых можно перемещаться по истории. -->
        <textarea id="text" cols="30" rows="10"></textarea>
        <button id="back">Back</button>
        <button id="next">Next</button>
        <script>
            var btn = document.getElementById("btn");
            var back = document.getElementById("back");
            var next = document.getElementById("next");
            btn.addEventListener("click", function () {
                var array = JSON.parse(localStorage.getItem("mass")) || [];
                array.push(text.value);
                localStorage.setItem("mass", JSON.stringify(array));
            });
            next.addEventListener("click", function () {
                var list = JSON.parse(localStorage.getItem("mass"));
                i++;
                if (i > list.length - 1) {
                    i = 0;
                }
                text.value = list[i];
            });
            back.addEventListener("click", function () {
                var list = JSON.parse(localStorage.getItem("mass"));
                i--;
                if (i < 0) {
                    i = list.length - 1;
                }
                text.value = list[i];
            });
            function load() {
                var list = JSON.parse(localStorage.getItem("mass"));
                for (i in list) {
                    if (list.length - 1 == i) {
                        text.value = list[i];
                    }
                }
            }
            load();
        </script>
    </body>
</html>
